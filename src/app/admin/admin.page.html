<!-- admin.page.html -->

<!-- <ion-header>
  <ion-toolbar>
    <ion-title>
      Administrador
    </ion-title>
  </ion-toolbar>
  <ion-button routerLink="/">HOME</ion-button>
</ion-header>

<ion-content>
  <ion-list>
    <ion-item *ngFor="let frase of frases; let i=index">
     {{i}} {{ frase.frase }} - {{ frase.autor }}
      <ion-button (click)="abrirFormularioEdicion(i)">Actualizar</ion-button>
      <ion-button (click)="eliminarFrase(i)">Eliminar</ion-button>
    </ion-item>
  </ion-list>

  <ion-card>
  <ion-item>
    <ion-label>Frase:</ion-label>
    <ion-input [(ngModel)]="nuevaFrase.frase" placeholder="Ingrese una nueva frase"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label>Autor:</ion-label>
    <ion-input [(ngModel)]="nuevaFrase.autor" placeholder="Ingrese el autor"></ion-input>
  </ion-item>

  <ion-button (click)="crearFrase()">Agregar</ion-button>
</ion-card>
</ion-content> -->
<!-- admin.page.html -->

<ion-header>
  <ion-toolbar>
    <ion-title> Administrador </ion-title>
  </ion-toolbar>
  <ion-button routerLink="/">HOME</ion-button>
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-content>
      <ion-button (click)="modoAutomatico()">Modo Automático</ion-button>
    </ion-card-content>
    <!-- MODAL -->
    <ion-button expand="block" (click)="setOpen(true)">Fotos</ion-button>
  <ion-modal [isOpen]="isModalOpen">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Foto del día</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="setOpen(false)">Volver</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <!-- Agrega un campo de búsqueda -->
        <ion-searchbar [(ngModel)]="searchTextImage" placeholder="Buscar"></ion-searchbar>
  
        <!-- Itera sobre cada imagen y muestra el botón "Toggle Fav" -->
        <ion-item *ngFor="let imagen of listaImagenes | buscarImagen: searchTextImage; let i=index">
          <img [src]="imagen.imagen" > ID: {{i}} - {{imagen.autor}}
          
          <!-- Muestra si la propiedad 'fav' es true o false -->
          <ion-badge color="success" *ngIf="imagen.fav">Fav: True</ion-badge>
          <ion-badge color="danger" *ngIf="!imagen.fav">Fav: False</ion-badge>
          
          <!-- Botón para alternar la propiedad 'fav' de la imagen actual -->
          <ion-button (click)="toggleFav(imagen)">Toggle Fav</ion-button>
        </ion-item>
      </ion-content>
      
      
    </ng-template>
  </ion-modal>
  </ion-card>

  <ion-card>
    <ion-card-title>Añadir a frase</ion-card-title>
    <ion-item>
      <ion-label>Frase:</ion-label>
      <ion-input
        [(ngModel)]="nuevaFrase.frase"
        placeholder="Ingrese una nueva frase"
      ></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Autor:</ion-label>
      <ion-input
        [(ngModel)]="nuevaFrase.autor"
        placeholder="Ingrese el autor"
      ></ion-input>
    </ion-item>
    <ion-button (click)="crearFrase()">Agregar</ion-button>
    <ion-searchbar [(ngModel)]="searchText"></ion-searchbar>
  </ion-card>
  <ion-segment [(ngModel)]="campoBusqueda">
    <ion-segment-button value="frases">
      <ion-label>Frases</ion-label>
    </ion-segment-button>
    <ion-segment-button value="frases_usuario">
      <ion-label>Frases Usuario</ion-label>
    </ion-segment-button>
    <ion-segment-button value="frases_del_dia">
      <ion-label>Frases del Día</ion-label>
    </ion-segment-button>
  </ion-segment>

  <ion-card *ngIf="campoBusqueda === 'frases'">
    <ion-card-title>Frases</ion-card-title>
    <ion-list>
      <!-- Utilizar *ngFor con la función filtrarFrases() -->
      <ion-item *ngFor="let frase of filtrarFrases(frases); let i=index">
        {{i}} {{ frase.frase }} - {{ frase.autor }} - {{frase.fechaSubida}}
        <ion-button (click)="abrirFormularioEdicion(i)">Actualizar</ion-button>
        <ion-button (click)="eliminarFrase(i)">Eliminar</ion-button>
        <ion-button (click)="moverAFrasesUsuario(i)"
          >Mover a Frases Usuario</ion-button
        >
        <ion-button color="success" (click)="moverAFrasesDelDia(i)"
          ><ion-icon name="flag-outline"></ion-icon
        ></ion-button>
      </ion-item>
    </ion-list>
  </ion-card>

  <!-- Sección Frases Usuario -->
  <ion-card *ngIf="campoBusqueda === 'frases_usuario'">
    <ion-card-title>Frases Usuario</ion-card-title>
    <ion-list>
      <!-- Utilizar *ngFor con la función filtrarFrases() -->
      <ion-item *ngFor="let frase of filtrarFrases(frasesUsuario); let i=index">
        {{i}} {{ frase.frase }} - {{ frase.autor }} - {{frase.fechaSubida}}
        <ion-button
          (click)="abrirFormularioEdicion(i, campoBusqueda === 'frases_usuario')"
          >Actualizar</ion-button
        >
        <ion-button (click)="eliminarFraseUsuario(i)">Eliminar</ion-button>
        <ion-button (click)="moverAFrases(i)">Mover a Frases</ion-button>
      </ion-item>
    </ion-list>
  </ion-card>

  <!-- Sección Frases del Día -->
  <ion-card *ngIf="campoBusqueda === 'frases_del_dia'">
    <ion-card-title>Frases del Día</ion-card-title>
    <ion-list>
      <!-- Utilizar *ngFor con la función filtrarFrases() -->
      <ion-item *ngFor="let frase of filtrarFrases(frasesDelDia); let i=index">
        {{i}} {{ frase.frase }} - {{ frase.autor }} - {{frase.fechaSubida}}
        <ion-button (click)="moverAFrasesUsuarioDesdeDelDia(i)"
          >Mover a Frases Usuario</ion-button
        >
        <ion-button (click)="moverAFrasesDesdeDelDia(i)"
          >Mover a Frases</ion-button
        >
      </ion-item>
    </ion-list>
  </ion-card>
</ion-content>
